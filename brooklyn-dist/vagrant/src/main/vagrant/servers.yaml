#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#

---
default_config:
    check_newer_vagrant_box: true
    run_os_update: true
servers:
  - name: brooklyn
    box: ubuntu/vivid64
    ram: 2048
    cpus: 4
    ip: 10.10.10.100
    shell:
      env:
        BROOKLYN_VERSION: 0.9.0-SNAPSHOT
      cmd:
        - sudo sh -c 'export DEBIAN_FRONTEND=noninteractive; apt-get install --yes openjdk-8-jre-headless'
        - curl -s -S -J -O -L "https://www.apache.org/dyn/closer.cgi?action=download&filename=brooklyn/apache-brooklyn-${BROOKLYN_VERSION}/apache-brooklyn-${BROOKLYN_VERSION}-bin.tar.gz"
        - tar zxf apache-brooklyn-${BROOKLYN_VERSION}-bin.tar.gz
        - ln -s apache-brooklyn-${BROOKLYN_VERSION}-bin apache-brooklyn
        - sudo mkdir -p /var/log/brooklyn
        - sudo chown -R vagrant:vagrant /var/log/brooklyn
        - sudo cp /vagrant/files/brooklyn.service /etc/systemd/system/brooklyn.service
        - mkdir -p /home/vagrant/.brooklyn
        - cp /vagrant/files/brooklyn.properties /home/vagrant/.brooklyn/
        - chmod 600 /home/vagrant/.brooklyn/brooklyn.properties
        - sudo systemctl start brooklyn
        - sudo systemctl enable brooklyn
  - name: byon1
    box: ubuntu/vivid64
    ram: 512
    cpus: 2
    ip: 10.10.10.101
  - name: byon2
    box: ubuntu/vivid64
    ram: 512
    cpus: 2
    ip: 10.10.10.102
  - name: byon3
    box: ubuntu/vivid64
    ram: 512
    cpus: 2
    ip: 10.10.10.103
  - name: byon4
    box: ubuntu/vivid64
    ram: 512
    cpus: 2
    ip: 10.10.10.104
...
